# 三国杀项目改进建议报告 (Gameplay & Content)

本报告基于联网搜索结果和当前项目状态，针对游戏内容（角色、卡牌）、玩法模式和机制提出改进性建议。

## 1. 角色与技能体系增强 (Heroes & Skills)

当前项目主要包含标准版武将。建议分两个阶段进行扩展：一是将标准版武将升级为"界限突破"版本以提高平衡性和游戏性；二是引入"神话再临"扩展包中的高人气武将。

### 1.1 标准版武将 -> 界限突破 (Limit Break)升级
标准版部分武将技能设计较早，存在强度过低或体验不佳的问题。建议优先更新以下武将：

*   **界关羽 (Shu)**
    *   **改动**：【武圣】原技能不变；新增【义绝】（出牌阶段限一次，与一名角色拼点。若你赢，该角色本回合非锁定技失效且不能使用/打出手牌；若你没赢，你可令其回复1点体力）。
    *   **理由**：增加了关羽的控制能力和破防能力，不再只是单纯的"杀"机器。
*   **界张辽 (Wei)**
    *   **改动**：【突袭】改为"摸牌阶段，你可以少摸任意张牌，然后选择等量的其他角色，获得这些角色的各一张手牌"。
    *   **理由**：相比原版固定少摸2张，界张辽更灵活，可以选择只偷1张。
*   **界赵云 (Shu)**
    *   **改动**：【龙胆】不变；新增【涯角】（当你于回合外使用或打出手牌【杀】或【闪】时，你可以亮出牌堆顶的一张牌。若此牌与你使用/打出的牌类别相同，你可以将之交给任意角色；若不同，你可以将之置入弃牌堆）。
    *   **理由**：大幅增强赵云的回合外防御和过牌能力。
*   **界马超 (Shu)**
    *   **改动**：【铁骑】判定改为"你可以弃置一张杀，令目标弃置一张牌，然后其非锁定技失效且不能使用闪"。
    *   **理由**：强力封印技能，克制卖血流武将（如郭嘉、曹操）。

### 1.2 引入"神话再临"精选武将
建议按包逐步引入机制独特且代码实现难度适中的武将：

*   **风包 (Wind)**
    *   **小乔 (Wu)**: 引入【天香】（转移伤害）机制，需要重构伤害结算流程，支持伤害转移。
    *   **周泰 (Wu)**: 引入【不屈】（濒死状态维持），涉及复杂的濒死结算和状态标记。
*   **火包 (Fire)**
    *   **荀彧 (Wei)**: 【驱虎】（拼点+伤害），【节命】（补牌）。机制：拼点系统。
    *   **太史慈 (Wu)**: 【天义】（拼点+双杀）。机制：多目标杀。
*   **林包 (Forest)**
    *   **孙坚 (Wu)**: 【英魂】（卖血辅助），逻辑简单，易于实现。
    *   **贾诩 (Qun)**: 【完杀】（锁定技，濒死无法求桃），【乱武】（AOE互动）。
*   **山包 (Mountain)**
    *   **姜维 (Shu)**: 【挑衅】（强制攻击），需要实现"请求对方出杀"的交互逻辑。
    *   **张昭&张纮 (Wu)**: 【固政】（回收弃牌），涉及弃牌堆管理。

## 2. 卡牌系统扩展：军争篇 (Military Strategy Expansion)

军争篇是三国杀最重要的扩展包，引入了属性伤害和核心锦囊。

### 2.1 新增基本牌
*   **酒 (Alcohol)**:
    *   效果1：出牌阶段使用，本回合下一张【杀】伤害+1。
    *   效果2：濒死状态使用，回复1点体力。
*   **火杀 (Fire Slash)**: 造成火焰属性伤害。
*   **雷杀 (Thunder Slash)**: 造成雷电属性伤害。

### 2.2 新增锦囊牌
*   **铁索连环 (Chain Linking)**:
    *   核心机制：**连环状态**。处于连环状态的角色受到属性伤害（火/雷）时，会传导给所有其他连环状态的角色。
    *   实现挑战：需要在 `Player` 类中增加 `is_chained` 状态，并在 `GameEngine.deal_damage` 中实现伤害传导递归逻辑。
*   **火攻 (Fire Attack)**: 展示手牌+弃置同花色牌造成伤害。
*   **兵粮寸断 (Rations Depleted)**: 判定阶段生效，判定不为梅花则跳过摸牌阶段。

### 2.3 新增装备牌
*   **藤甲 (Vine Armor)**: 锁定技，【南蛮入侵】、【万箭齐发】和普通【杀】无效；受到火焰伤害+1。
*   **白银狮子 (Silver Lion)**: 锁定技，受到伤害大于1点时，只受1点；失去装备时回血。
*   **古锭刀 (Ancient Scimitar)**: 杀造成伤害时，若目标无手牌，伤害+1。

## 3. 新游戏模式建议 (Game Modes)

### 3.1 PVE 模式：虎牢关 (Hulao Pass / Boss Rush)
适合单机版的玩法，玩家组队挑战强力 Boss。

*   **规则**：
    *   **1 vs 3**：1名玩家扮演神吕布（Boss），3名玩家（或AI）扮演联合军。
    *   **神吕布双形态**：
        *   *最强神话*：初始形态，高血量。
        *   *暴怒战神*：血量降至一半时变身，获得新技能（如【修罗】：回合开始阶段弃牌区拿牌）。
    *   **特殊机制**：神吕布可能有额外的出牌阶段，或者回合结束时摸牌。

### 3.2 1v1 竞技场 (Arena / KOF Mode)
适合快速对局。

*   **规则**：
    *   **双将/三将制**：玩家选择 3 名武将，按顺序上场。前一名阵亡后，下一名接替，继承装备但不继承手牌（或继承部分）。
    *   **卡牌调整**：移除【闪电】等高随机性或不适合单挑的牌。
    *   **技能调整**：部分辅助技能（如刘备【仁德】）在 1v1 中通常改为只能对自己使用或有其他收益。

## 4. 游戏机制底层优化 (Core Mechanics)

为了支持上述扩展，底层引擎需要支持：

1.  **属性伤害系统 (Elemental Damage)**
    *   伤害不再只是数值，需要包含类型：`Normal`, `Fire`, `Thunder`, `LostHP` (体力流失)。
    *   伤害结算流程需增加"属性传导"检查。

2.  **拼点系统 (Pindian System)**
    *   通用的拼点交互接口：`GameEngine.pindian(source, target)`。
    *   处理双方出牌、比较点数、触发后续效果。

3.  **多段伤害与连环结算**
    *   伤害事件需要支持"链式反应"（铁索连环）。

## 5. AI 智能升级 (AI Improvements)

*   **基于价值的决策 (Value-based Decision Making)**
    *   引入"卡牌价值表"（例如：顺手牵羊价值=2，无中生有价值=2，杀价值=1）。
    *   AI 计算每种操作的收益（Damage Deal + Card Advantage），选择收益最高的操作。
*   **身份推断 (Role Inference)**
    *   即使在不知道身份的情况下（非上帝视角），AI 应根据其他玩家的行为（如攻击主公）标记其为"潜在反贼"，并据此行动。

---
**建议实施顺序**：
1.  完善属性伤害与连环机制（为军争篇铺路）。
2.  引入军争篇卡牌（丰富战术维度）。
3.  升级标准版武将至界限突破（提升现有体验）。
4.  开发 PVE 虎牢关模式（增加单机可玩性）。
