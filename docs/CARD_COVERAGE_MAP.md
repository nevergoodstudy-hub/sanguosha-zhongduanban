# 卡牌覆盖率映射表

> 基于 `data/cards.json` 权威数据源，列出"已实现/缺失实现/缺失测试"的闭环清单

## 概述

- **数据源**: `data/cards.json`
- **引擎**: `game/engine.py`
- **测试**: `tests/`
- **生成时间**: 2026-01-14

---

## 基础牌 (Basic Cards)

| 卡牌名称 | 引擎处理器 | 测试覆盖 | 状态 |
|---------|-----------|---------|------|
| 杀 | `_use_sha` | ✅ test_game.py | ✅ 完成 |
| 火杀 | `_use_sha` (支持属性伤害) | ✅ test_juunzheng.py | ✅ 完成 |
| 雷杀 | `_use_sha` (支持属性伤害) | ✅ test_juunzheng.py | ✅ 完成 |
| 闪 | 响应机制 | ✅ test_game.py | ✅ 完成 |
| 桃 | `_use_tao` | ✅ test_game.py | ✅ 完成 |
| 酒 | `_use_jiu` | ⚠️ 需补充 | ⚠️ 部分 |

---

## 锦囊牌 (Trick Cards)

### 即时锦囊

| 卡牌名称 | 引擎处理器 | 测试覆盖 | 状态 |
|---------|-----------|---------|------|
| 决斗 | `_use_juedou` | ✅ test_game.py | ✅ 完成 |
| 南蛮入侵 | `_use_nanman` | ✅ test_game.py | ✅ 完成 |
| 万箭齐发 | `_use_wanjian` | ✅ test_game.py | ✅ 完成 |
| 无中生有 | `_use_wuzhong` | ✅ test_game.py | ✅ 完成 |
| 过河拆桥 | `_use_guohe` | ✅ test_game.py | ✅ 完成 |
| 顺手牵羊 | `_use_shunshou` | ✅ test_game.py | ✅ 完成 |
| 桃园结义 | `_use_taoyuan` | ⚠️ 需补充 | ⚠️ 部分 |
| 无懈可击 | 响应机制 | ✅ test_game.py | ✅ 完成 |
| 铁索连环 | `_use_tiesuo` | ✅ test_juunzheng.py | ✅ 完成 |
| **火攻** | ❌ **未实现** | ❌ 无测试 | ❌ **缺失** |

### 延时锦囊

| 卡牌名称 | 引擎处理器 | 测试覆盖 | 状态 |
|---------|-----------|---------|------|
| 乐不思蜀 | `_use_lebusishu` | ✅ test_game.py | ✅ 完成 |
| 兵粮寸断 | `_use_bingliang` | ⚠️ 需补充 | ⚠️ 部分 |
| 闪电 | `_use_shandian` | ⚠️ 需补充 | ⚠️ 部分 |

---

## 装备牌 (Equipment Cards)

### 武器

| 卡牌名称 | 攻击范围 | 引擎效果 | 测试覆盖 | 状态 |
|---------|---------|---------|---------|------|
| 青龙偃月刀 | 3 | ✅ 追杀效果 | ⚠️ 需补充 | ⚠️ 部分 |
| 丈八蛇矛 | 3 | ✅ 两牌当杀 | ⚠️ 需补充 | ⚠️ 部分 |
| 诸葛连弩 | 1 | ✅ 无限出杀 | ⚠️ 需补充 | ⚠️ 部分 |
| 贯石斧 | 3 | ✅ 弃牌强杀 | ⚠️ 需补充 | ⚠️ 部分 |
| 麒麟弓 | 5 | ✅ 弃坐骑 | ⚠️ 需补充 | ⚠️ 部分 |
| 方天画戟 | 4 | ✅ 额外目标 | ⚠️ 需补充 | ⚠️ 部分 |
| 寒冰剑 | 2 | ✅ 弃牌替伤 | ⚠️ 需补充 | ⚠️ 部分 |
| **古锭刀** | 2 | ❌ **未实现** | ❌ 无测试 | ❌ **缺失** |
| **朱雀羽扇** | 4 | ❌ **未实现** | ❌ 无测试 | ❌ **缺失** |

### 防具

| 卡牌名称 | 引擎效果 | 测试覆盖 | 状态 |
|---------|---------|---------|------|
| 八卦阵 | ✅ 判定闪 | ⚠️ 需补充 | ⚠️ 部分 |
| 仁王盾 | ✅ 黑杀无效 | ⚠️ 需补充 | ⚠️ 部分 |
| 藤甲 | ✅ AOE/普杀无效+火伤+1 | ✅ test_juunzheng.py | ✅ 完成 |
| **白银狮子** | ❌ **未实现** | ❌ 无测试 | ❌ **缺失** |

### 坐骑

| 卡牌名称 | 距离修正 | 引擎效果 | 状态 |
|---------|---------|---------|------|
| 赤兔 (-1马) | -1 | ✅ 距离计算 | ✅ 完成 |
| 大宛 (-1马) | -1 | ✅ 距离计算 | ✅ 完成 |
| 紫骍 (-1马) | -1 | ✅ 距离计算 | ✅ 完成 |
| 的卢 (+1马) | +1 | ✅ 距离计算 | ✅ 完成 |
| 绝影 (+1马) | +1 | ✅ 距离计算 | ✅ 完成 |
| 爪黄飞电 (+1马) | +1 | ✅ 距离计算 | ✅ 完成 |

---

## 待补齐清单 (Action Items)

### P1 优先级（规则闭环）

1. **火攻** - 需实现 `_use_huogong` 处理器 + 单测
   - 目标展示手牌 → 使用者弃同花色 → 造成1点火焰伤害

### P2 优先级（装备效果）

1. **古锭刀** - 需实现武器效果 + 单测
   - 锁定技：杀造成伤害时，若目标无手牌，伤害+1

2. **朱雀羽扇** - 需实现武器效果 + 单测
   - 可将普通杀当火杀使用

3. **白银狮子** - 需实现防具效果 + 单测
   - 锁定技：受到大于1点伤害时，防止多余伤害
   - 锁定技：失去此装备时，回复1点体力

---

## 统计

- **总卡牌类型**: 27 种
- **已完成**: 21 种 (78%)
- **部分完成**: 3 种 (11%)
- **缺失**: 4 种 (15%)
  - 火攻、古锭刀、朱雀羽扇、白银狮子
