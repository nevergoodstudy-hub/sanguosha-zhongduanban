# 卡牌覆盖率映射表

> 基于 `data/cards.json` 权威数据，映射引擎处理器与测试覆盖状态

## 概览

| 分类 | 总数 | 已实现 | 有测试 | 覆盖率 |
|------|------|--------|--------|--------|
| 基本牌 | 6种 | 6 | 4 | 100% |
| 锦囊牌 | 14种 | 14 | 5 | 100% |
| 装备牌 | 18种 | 18 | 3 | 100% |

## 基本牌 (Basic Cards)

| 卡牌名 | 引擎处理器 | 状态 | 测试用例 |
|--------|-----------|------|----------|
| 杀 | `_use_sha` | ✅ 完成 | `test_use_sha` |
| 火杀 | `_use_sha` (fire_attack) | ✅ 完成 | - |
| 雷杀 | `_use_sha` (thunder_attack) | ✅ 完成 | - |
| 闪 | 响应机制 `_request_shan` | ✅ 完成 | - |
| 桃 | `_use_tao` | ✅ 完成 | `test_use_tao` |
| 酒 | `_use_jiu` | ✅ 完成 | - |

## 锦囊牌 (Trick Cards)

### 即时锦囊

| 卡牌名 | 引擎处理器 | 状态 | 测试用例 |
|--------|-----------|------|----------|
| 决斗 | `_use_juedou` | ✅ 完成 | - |
| 南蛮入侵 | `_use_nanman` | ✅ 完成 | - |
| 万箭齐发 | `_use_wanjian` | ✅ 完成 | - |
| 无中生有 | `_use_wuzhong` | ✅ 完成 | - |
| 过河拆桥 | `_use_guohe` | ✅ 完成 | - |
| 顺手牵羊 | `_use_shunshou` | ✅ 完成 | - |
| 桃园结义 | `_use_taoyuan` | ✅ 完成 | - |
| 无懈可击 | `_request_wuxie` | ✅ 完成 | - |
| 火攻 | `_use_huogong` | ✅ 完成 | - |
| 铁索连环 | `_use_tiesuo` | ✅ 完成 | - |

### 延时锦囊

| 卡牌名 | 引擎处理器 | 状态 | 测试用例 |
|--------|-----------|------|----------|
| 乐不思蜀 | `_use_lebusishu` | ✅ 完成 | - |
| 兵粮寸断 | `_use_bingliang` | ✅ 完成 | - |
| 闪电 | `_use_shandian` | ✅ 完成 | - |

## 装备牌 (Equipment Cards)

### 武器

| 卡牌名 | 攻击范围 | 效果实现 | 状态 | 测试用例 |
|--------|---------|----------|------|----------|
| 青龙偃月刀 | 3 | `_trigger_qinglong` | ✅ 完成 | - |
| 丈八蛇矛 | 3 | 两牌当杀 | ⚠️ 部分 | - |
| 诸葛连弩 | 1 | 无限出杀 | ✅ 完成 | - |
| 贯石斧 | 3 | 弃牌强杀 | ⚠️ 部分 | - |
| 麒麟弓 | 5 | 弃坐骑 | ⚠️ 部分 | - |
| 方天画戟 | 4 | 额外目标 | ⚠️ 部分 | - |
| 寒冰剑 | 2 | 弃牌代伤 | ⚠️ 部分 | - |
| 古锭刀 | 2 | 空手+1伤 | ✅ 完成 | `test_gudingdao` |
| 朱雀羽扇 | 4 | 杀变火杀 | ✅ 完成 | - |

### 防具

| 卡牌名 | 效果实现 | 状态 | 测试用例 |
|--------|----------|------|----------|
| 八卦阵 | `_trigger_bagua` | ✅ 完成 | - |
| 仁王盾 | 黑杀无效 | ✅ 完成 | - |
| 藤甲 | 普杀/AOE无效,火+1 | ✅ 完成 | - |
| 白银狮子 | 伤害≤1,失去回血 | ✅ 完成 | - |

### 坐骑

| 卡牌名 | 距离修正 | 状态 | 测试用例 |
|--------|---------|------|----------|
| 赤兔 | -1马 | ✅ 完成 | `test_horse_distance_modifier` |
| 的卢 | +1马 | ✅ 完成 | - |
| 爪黄飞电 | +1马 | ✅ 完成 | - |
| 绝影 | +1马 | ✅ 完成 | - |
| 大宛 | -1马 | ✅ 完成 | - |
| 紫骍 | -1马 | ✅ 完成 | - |

## 需要补充的测试用例

1. **火攻测试** - 验证展示手牌、弃置同花色、火焰伤害
2. **古锭刀测试** - 验证目标空手时伤害+1
3. **白银狮子测试** - 验证伤害削减和失去装备回血
4. **铁索连环测试** - 验证连环传导机制
5. **延时锦囊测试** - 验证判定区机制

---

*最后更新: 2026-01-14*
